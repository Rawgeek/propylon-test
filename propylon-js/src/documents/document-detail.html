<template>
  <require from="../utils/date-format"></require>

  <div class="card">
    <div class="card-header text-white bg-primary">
      Document
    </div>
    <div class="card-body">
      <form role="form">
        <div class="form-group row mb-3">
          <label class="col-md-3 col-form-label">URL</label>
          <div class="col-md-9">
            <input type="text" placeholder="" class="form-control" value.bind="document.url">
          </div>
        </div>
        <div class="form-group row mb-3">
          <label class="col-md-3 col-form-label">Created</label>
          <div class="col-md-9">
            <input type="text" disabled placeholder="" class="form-control" value.bind="document.created | dateFormat">
          </div>
        </div>

      <div class="">
        <a class="btn btn-outline-primary float-right" download href.bind="document.url">Download</a>
        <button class="btn btn-success float-right" click.delegate="save()" disabled.bind="!canSave">Update</button>
      </div>
    </div>
    <div repeat.for="version of document.versions" class="card-body">
      <h3>Revision ${version.number}</h3>
      <p>
        URL: ${version.document.url}<br>
        Download URL: ${version.download_url}<br>
        Comment: ${version.revision.comment}<br>
        <small>${version.revision.date_created | dateFormat}</small>
      </p>
      <div class="mt-3">
        <a class="btn btn-outline-primary float-right" href.bind="version.download_url">Download</a>
        <button class="btn btn-success float-right" click.delegate="restore(version.id)" disabled>Restore</button>
      </div>



    </div>
  </div>
</template>
